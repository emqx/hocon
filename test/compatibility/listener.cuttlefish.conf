listener.tcp.external = 0.0.0.0:1883
listener.tcp.external.acceptors = 8
listener.tcp.external.max_connections = 1024000
listener.tcp.external.max_conn_rate = 1000
listener.tcp.external.active_n = 100
listener.tcp.external.zone = external
listener.tcp.external.access.1 = allow all
listener.tcp.external.proxy_protocol = on
listener.tcp.external.proxy_protocol_timeout = 3s
listener.tcp.external.peer_cert_as_username = cn
listener.tcp.external.peer_cert_as_clientid = cn
listener.tcp.external.backlog = 1024
listener.tcp.external.send_timeout = 15s
listener.tcp.external.send_timeout_close = on
listener.tcp.external.recbuf = 2KB
listener.tcp.external.sndbuf = 2KB
listener.tcp.external.buffer = 2KB
listener.tcp.external.tune_buffer = off
listener.tcp.external.high_watermark = 1MB
listener.tcp.external.nodelay = true
listener.tcp.external.reuseaddr = true

listener.tcp.internal = 127.0.0.1:11883
listener.tcp.internal.acceptors = 4
listener.tcp.internal.max_connections = 1024000
listener.tcp.internal.max_conn_rate = 1000
listener.tcp.internal.active_n = 1000
listener.tcp.internal.zone = internal
listener.tcp.internal.backlog = 512
listener.tcp.internal.send_timeout = 5s
listener.tcp.internal.send_timeout_close = on
listener.tcp.internal.recbuf = 64KB
listener.tcp.internal.sndbuf = 64KB
listener.tcp.internal.buffer = 16KB
listener.tcp.internal.tune_buffer = off
listener.tcp.internal.nodelay = false
listener.tcp.internal.reuseaddr = true

listener.ssl.external = 8883
listener.ssl.external.acceptors = 16
listener.ssl.external.max_connections = 102400
listener.ssl.external.max_conn_rate = 500
listener.ssl.external.active_n = 100
listener.ssl.external.zone = external
listener.ssl.external.access.1 = allow all
listener.ssl.external.proxy_protocol = on
listener.ssl.external.proxy_protocol_timeout = 3s
listener.ssl.external.tls_versions = tlsv1.3,tlsv1.2,tlsv1.1,tlsv1
listener.ssl.external.handshake_timeout = 15s
listener.ssl.external.key_password = yourpass
listener.ssl.external.keyfile = {{ platform_etc_dir }}/certs/key.pem
listener.ssl.external.certfile = {{ platform_etc_dir }}/certs/cert.pem
listener.ssl.external.cacertfile = {{ platform_etc_dir }}/certs/cacert.pem
listener.ssl.external.dhfile = {{ platform_etc_dir }}/certs/dh-params.pem
listener.ssl.external.verify = verify_peer
listener.ssl.external.fail_if_no_peer_cert = true
listener.ssl.external.ciphers = TLS_AES_256_GCM_SHA384,TLS_AES_128_GCM_SHA256,TLS_CHACHA20_POLY1305_SHA256,TLS_AES_128_CCM_SHA256,TLS_AES_128_CCM_8_SHA256,ECDHE-ECDSA-AES256-GCM-SHA384,ECDHE-RSA-AES256-GCM-SHA384,ECDHE-ECDSA-AES256-SHA384,ECDHE-RSA-AES256-SHA384,ECDHE-ECDSA-DES-CBC3-SHA,ECDH-ECDSA-AES256-GCM-SHA384,ECDH-RSA-AES256-GCM-SHA384,ECDH-ECDSA-AES256-SHA384,ECDH-RSA-AES256-SHA384,DHE-DSS-AES256-GCM-SHA384,DHE-DSS-AES256-SHA256,AES256-GCM-SHA384,AES256-SHA256,ECDHE-ECDSA-AES128-GCM-SHA256,ECDHE-RSA-AES128-GCM-SHA256,ECDHE-ECDSA-AES128-SHA256,ECDHE-RSA-AES128-SHA256,ECDH-ECDSA-AES128-GCM-SHA256,ECDH-RSA-AES128-GCM-SHA256,ECDH-ECDSA-AES128-SHA256,ECDH-RSA-AES128-SHA256,DHE-DSS-AES128-GCM-SHA256,DHE-DSS-AES128-SHA256,AES128-GCM-SHA256,AES128-SHA256,ECDHE-ECDSA-AES256-SHA,ECDHE-RSA-AES256-SHA,DHE-DSS-AES256-SHA,ECDH-ECDSA-AES256-SHA,ECDH-RSA-AES256-SHA,AES256-SHA,ECDHE-ECDSA-AES128-SHA,ECDHE-RSA-AES128-SHA,DHE-DSS-AES128-SHA,ECDH-ECDSA-AES128-SHA,ECDH-RSA-AES128-SHA,AES128-SHA
listener.ssl.external.secure_renegotiate = off
listener.ssl.external.reuse_sessions = on
listener.ssl.external.honor_cipher_order = on
listener.ssl.external.peer_cert_as_username = cn
listener.ssl.external.peer_cert_as_clientid = cn
listener.ssl.external.backlog = 1024
listener.ssl.external.send_timeout = 15s
listener.ssl.external.send_timeout_close = on
listener.ssl.external.recbuf = 4KB
listener.ssl.external.sndbuf = 4KB
listener.ssl.external.buffer = 4KB
listener.ssl.external.tune_buffer = off
listener.ssl.external.nodelay = true
listener.ssl.external.reuseaddr = true

listener.ws.external = 8083
listener.ws.external.mqtt_path = /mqtt
listener.ws.external.acceptors = 4
listener.ws.external.max_connections = 102400
listener.ws.external.max_conn_rate = 1000
listener.ws.external.active_n = 100
listener.ws.external.zone = external
listener.ws.external.access.1 = allow all
listener.ws.external.fail_if_no_subprotocol = true
listener.ws.external.supported_subprotocols = mqtt, mqtt-v3, mqtt-v3.1.1, mqtt-v5
listener.ws.external.proxy_address_header = X-Forwarded-For
listener.ws.external.proxy_port_header = X-Forwarded-Port
listener.ws.external.proxy_protocol = on
listener.ws.external.proxy_protocol_timeout = 3s
listener.ws.external.peer_cert_as_username = cn
listener.ws.external.peer_cert_as_clientid = cn
listener.ws.external.backlog = 1024
listener.ws.external.send_timeout = 15s
listener.ws.external.send_timeout_close = on
listener.ws.external.recbuf = 2KB
listener.ws.external.sndbuf = 2KB
listener.ws.external.buffer = 2KB
listener.ws.external.tune_buffer = off
listener.ws.external.nodelay = true
listener.ws.external.compress = true
listener.ws.external.deflate_opts.level = default
listener.ws.external.deflate_opts.mem_level = 8
listener.ws.external.deflate_opts.strategy = default
listener.ws.external.deflate_opts.server_context_takeover = takeover
listener.ws.external.deflate_opts.client_context_takeover = takeover
listener.ws.external.deflate_opts.server_max_window_bits = 15
listener.ws.external.deflate_opts.client_max_window_bits = 15
listener.ws.external.idle_timeout = 60s
listener.ws.external.max_frame_size = 0
listener.ws.external.mqtt_piggyback = multiple
listener.ws.external.check_origin_enable = false
listener.ws.external.allow_origin_absence = true
listener.ws.external.check_origins = http://localhost:18083, http://127.0.0.1:18083

listener.wss.external = 8084
listener.wss.external.mqtt_path = /mqtt
listener.wss.external.acceptors = 4
listener.wss.external.max_connections = 16
listener.wss.external.max_conn_rate = 1000
listener.wss.external.active_n = 100
listener.wss.external.zone = external
listener.wss.external.access.1 = allow all
listener.wss.external.fail_if_no_subprotocol = true
listener.wss.external.supported_subprotocols = mqtt, mqtt-v3, mqtt-v3.1.1, mqtt-v5
listener.wss.external.proxy_address_header = X-Forwarded-For
listener.wss.external.proxy_port_header = X-Forwarded-Port
listener.wss.external.proxy_protocol = on
listener.wss.external.proxy_protocol_timeout = 3s
listener.wss.external.tls_versions = tlsv1.3,tlsv1.2,tlsv1.1,tlsv1
listener.wss.external.keyfile = {{ platform_etc_dir }}/certs/key.pem
listener.wss.external.certfile = {{ platform_etc_dir }}/certs/cert.pem
listener.wss.external.cacertfile = {{ platform_etc_dir }}/certs/cacert.pem
listener.wss.external.depth = 10
listener.wss.external.key_password = yourpass
listener.wss.external.verify = verify_peer
listener.wss.external.fail_if_no_peer_cert = true
listener.wss.external.ciphers = TLS_AES_256_GCM_SHA384,TLS_AES_128_GCM_SHA256,TLS_CHACHA20_POLY1305_SHA256,TLS_AES_128_CCM_SHA256,TLS_AES_128_CCM_8_SHA256,ECDHE-ECDSA-AES256-GCM-SHA384,ECDHE-RSA-AES256-GCM-SHA384,ECDHE-ECDSA-AES256-SHA384,ECDHE-RSA-AES256-SHA384,ECDHE-ECDSA-DES-CBC3-SHA,ECDH-ECDSA-AES256-GCM-SHA384,ECDH-RSA-AES256-GCM-SHA384,ECDH-ECDSA-AES256-SHA384,ECDH-RSA-AES256-SHA384,DHE-DSS-AES256-GCM-SHA384,DHE-DSS-AES256-SHA256,AES256-GCM-SHA384,AES256-SHA256,ECDHE-ECDSA-AES128-GCM-SHA256,ECDHE-RSA-AES128-GCM-SHA256,ECDHE-ECDSA-AES128-SHA256,ECDHE-RSA-AES128-SHA256,ECDH-ECDSA-AES128-GCM-SHA256,ECDH-RSA-AES128-GCM-SHA256,ECDH-ECDSA-AES128-SHA256,ECDH-RSA-AES128-SHA256,DHE-DSS-AES128-GCM-SHA256,DHE-DSS-AES128-SHA256,AES128-GCM-SHA256,AES128-SHA256,ECDHE-ECDSA-AES256-SHA,ECDHE-RSA-AES256-SHA,DHE-DSS-AES256-SHA,ECDH-ECDSA-AES256-SHA,ECDH-RSA-AES256-SHA,AES256-SHA,ECDHE-ECDSA-AES128-SHA,ECDHE-RSA-AES128-SHA,DHE-DSS-AES128-SHA,ECDH-ECDSA-AES128-SHA,ECDH-RSA-AES128-SHA,AES128-SHA
listener.wss.external.secure_renegotiate = off
listener.wss.external.reuse_sessions = on
listener.wss.external.honor_cipher_order = on
listener.wss.external.peer_cert_as_username = cn
listener.wss.external.peer_cert_as_clientid = cn
listener.wss.external.backlog = 1024
listener.wss.external.send_timeout = 15s
listener.wss.external.send_timeout_close = on
listener.wss.external.recbuf = 4KB
listener.wss.external.sndbuf = 4KB
listener.wss.external.buffer = 4KB
listener.wss.external.nodelay = true
listener.wss.external.compress = true
listener.wss.external.deflate_opts.level = default
listener.wss.external.deflate_opts.mem_level = 8
listener.wss.external.deflate_opts.strategy = default
listener.wss.external.deflate_opts.server_context_takeover = takeover
listener.wss.external.deflate_opts.client_context_takeover = takeover
listener.wss.external.deflate_opts.server_max_window_bits = 15
listener.wss.external.deflate_opts.client_max_window_bits = 15
listener.wss.external.idle_timeout = 60s
listener.wss.external.max_frame_size = 0
listener.wss.external.mqtt_piggyback = multiple
listener.wss.external.check_origin_enable = false
listener.wss.external.allow_origin_absence = true
listener.wss.external.check_origins = https://localhost:8084, https://127.0.0.1:8084
